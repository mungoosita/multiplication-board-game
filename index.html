<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiplication Snakes & Ladders</title>

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin: 0;
  padding: 10px;
  touch-action: manipulation;
}

#board {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  max-width: 720px;
  margin: 15px auto;
  gap: 4px;
}

.cell {
  border: 1px solid #999;
  min-height: 70px;
  font-size: 12px;
  padding: 4px;
  position: relative;
  border-radius: 8px;
  background: #f5f5f5;
}

.cell:nth-child(odd) { background: #fef6e4; }
.cell:nth-child(even) { background: #e8f4f8; }

.start { background: #fff3cd !important; font-weight: bold; }
.snake { background: #fdecea !important; }
.ladder { background: #e8f5e9 !important; }
.finish { background: #e1bee7 !important; font-size: 14px; }

.icons {
  position: absolute;
  bottom: 2px;
  right: 4px;
  font-size: 18px;
}

.mark {
  position: absolute;
  top: 2px;
  right: 4px;
  font-size: 16px;
}

button {
  font-size: 18px;
  padding: 10px 18px;
  margin: 6px;
}

input {
  font-size: 18px;
  width: 120px;
  text-align: center;
}

#setup, #game {
  margin-top: 15px;
}
</style>
</head>

<body>

<h2>Multiplication Snakes & Ladders</h2>

<div id="setup">
  <p>Number of players (1â€“4)</p>
  <select id="playerCount" style="font-size:18px;">
    <option>1</option><option>2</option><option>3</option><option>4</option>
  </select>

  <p>Players: ğŸ¶ ğŸ± ğŸ¸ ğŸ¦Š</p>

  <button onclick="startGame()">Start Game</button>
</div>

<div id="game" style="display:none;">
  <p>Current player: <strong><span id="currentPlayer"></span></strong></p>

  <button id="rollBtn" onclick="rollDice()">ğŸ² Roll Dice</button>
  <p id="diceResult"></p>

  <div id="answerSection" style="display:none;">
    <p id="question"></p>
    <input type="number" id="answer" placeholder="Answer">
    <br>
    <button onclick="checkAnswer()">Submit</button>
  </div>

  <p id="message"></p>
  <div id="board"></div>
</div>

<script>
/* ğŸ”Š Sounds */
const sounds = {
  dice: new Audio("dice.mp3"),
  correct: new Audio("correct.mp3"),
  wrong: new Audio("wrong.mp3"),
  snake: new Audio("snake.mp3"),
  ladder: new Audio("ladder.mp3"),
  win: new Audio("win.mp3")
};

function playSound(name) {
  if (sounds[name]) {
    sounds[name].currentTime = 0;
    sounds[name].play();
  }
}

/* ğŸ® Game state */
const icons = ["ğŸ¶", "ğŸ±", "ğŸ¸", "ğŸ¦Š"];
let players = [];
let currentPlayerIndex = 0;
let snakes = {};
let ladders = {};
let gameOver = false;

let gamePhase = "roll"; // "roll" | "answer"
let currentAnswer = null;
let lastQuestion = null;

/* ğŸš€ Start */
function startGame() {
  const count = Number(document.getElementById("playerCount").value);
  players = [];
  currentPlayerIndex = 0;
  gameOver = false;
  gamePhase = "roll";

  for (let i = 0; i < count; i++) {
    players.push({ icon: icons[i], position: 0 });
  }

  generateSnakes();
  generateLadders();
  generateBoard();

  document.getElementById("setup").style.display = "none";
  document.getElementById("game").style.display = "block";
  updateTurn();
}

/* ğŸğŸªœ Board features */
function generateSnakes() {
  snakes = {};
  for (let i = 0; i < 5; i++) {
    let head = Math.floor(Math.random() * 40) + 50;
    let tail = Math.floor(Math.random() * (head - 10)) + 1;
    snakes[head] = tail;
  }
}

function generateLadders() {
  ladders = {};
  for (let i = 0; i < 5; i++) {
    let bottom = Math.floor(Math.random() * 40) + 1;
    let top = Math.floor(Math.random() * (100 - bottom)) + bottom + 10;
    ladders[bottom] = top;
  }
}

/* ğŸ§© Board */
function generateBoard() {
  const board = document.getElementById("board");
  board.innerHTML = "";

  const startCell = document.createElement("div");
  startCell.className = "cell start";
  startCell.id = "cell-0";
  startCell.innerHTML = `<strong>START</strong><div class="icons"></div>`;
  board.appendChild(startCell);

  for (let i = 1; i <= 100; i++) {
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.id = "cell-" + i;

    let mark = "";
    if (snakes[i]) { cell.classList.add("snake"); mark = "ğŸ"; }
    if (ladders[i]) { cell.classList.add("ladder"); mark = "ğŸªœ"; }
    if (i === 100) { cell.classList.add("finish"); mark = "ğŸ‰"; }

    cell.innerHTML = `
      <strong>${i}</strong>
      <div class="mark">${mark}</div>
      <div class="icons"></div>
    `;
    board.appendChild(cell);
  }

  updateBoard();
}

function updateBoard() {
  document.querySelectorAll(".icons").forEach(i => i.innerHTML = "");
  players.forEach(p => {
    const cell = document.getElementById("cell-" + p.position);
    if (cell) cell.querySelector(".icons").innerHTML += p.icon;
  });
}

/* ğŸ” Turn handling */
function updateTurn() {
  document.getElementById("currentPlayer").textContent =
    players[currentPlayerIndex].icon;
}

/* ğŸ² Dice */
function rollDice() {
  if (gameOver || gamePhase !== "roll") return;

  playSound("dice");
  const dice = Math.floor(Math.random() * 6) + 1;
  document.getElementById("diceResult").textContent = `ğŸ² Rolled: ${dice}`;

  const player = players[currentPlayerIndex];
  player.position = Math.min(100, player.position + dice);

  updateBoard();
  generateQuestion();

  gamePhase = "answer";
  document.getElementById("rollBtn").disabled = true;
}

/* â“ Question */
function generateQuestion() {
  let a, b, q;
  do {
    a = Math.floor(Math.random() * 12) + 1;
    b = Math.floor(Math.random() * 12) + 1;
    q = `${a} Ã— ${b}`;
  } while (q === lastQuestion);

  lastQuestion = q;
  currentAnswer = a * b;

  document.getElementById("question").textContent = `Solve: ${q}`;
  document.getElementById("answer").value = "";
  document.getElementById("answerSection").style.display = "block";
}

/* âœ… Answer */
function checkAnswer() {
  if (gameOver || gamePhase !== "answer") return;

  const player = players[currentPlayerIndex];
  const userAnswer = document.getElementById("answer").value;

  if (userAnswer == currentAnswer) {
    if (ladders[player.position]) {
      player.position = ladders[player.position];
      playSound("ladder");
      document.getElementById("message").textContent = "ğŸªœ Ladder! Climb up!";
    } else if (snakes[player.position]) {
      player.position = snakes[player.position];
      playSound("snake");
      document.getElementById("message").textContent = "ğŸ Snake! Slide down!";
    } else {
      playSound("correct");
      document.getElementById("message").textContent = "âœ… Correct!";
    }
  } else {
    playSound("wrong");
    player.position = 0;
    document.getElementById("message").textContent = "âŒ Wrong! Back to START.";
  }

  if (player.position === 100) {
    playSound("win");
    document.getElementById("message").textContent = `ğŸ‰ ${player.icon} wins!`;
    gameOver = true;
    updateBoard();
    return;
  }

  updateBoard();
  document.getElementById("answerSection").style.display = "none";
  document.getElementById("rollBtn").disabled = false;

  gamePhase = "roll";
  currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
  updateTurn();
}
</script>

</body>
</html>

